---
import Layout from "../layouts/Layout.astro";
import Article, { type HeaderData } from "../components/Article.astro";

const headerData: HeaderData = {
  name: "Access-Control-Allow-Methods",
  slug: "access-control-allow-methods",
  description: `The Access-Control-Allow-Methods header specifies which HTTP methods are allowed for cross-origin requests to a resource.<br/><br/>
When a cross-origin request uses a non-simple method (other than GET, POST, or HEAD), the browser sends a preflight request to check if the method is allowed. The server must respond with this header listing the permitted methods for the actual request to proceed.`,
  syntax: {
    code: `Access-Control-Allow-Methods: <method>
Access-Control-Allow-Methods: <method>, <method>, ...
Access-Control-Allow-Methods: *`,
    description:
      "The Access-Control-Allow-Methods header accepts one or more HTTP methods (e.g., `GET` or `GET, POST, PUT, DELETE`) to specify which methods are allowed for the cross-origin request. Additionally, the wildcard `*` can be used to allow all methods.",
  },
  examples: [
    {
      title: "Allowing a single method",
      description:
        "Permits only `GET` requests for this cross-origin resource.",
      code: `Access-Control-Allow-Methods: GET`,
    },
    {
      title: "Allowing multiple methods",
      description:
        "Permits multiple HTTP methods such as `GET`, `POST`, `PUT`, and `DELETE`. Methods are comma-separated.",
      code: `Access-Control-Allow-Methods: GET, POST, PUT, DELETE`,
    },
    {
      title: "Allowing all methods",
      description:
        "Permits any HTTP method to be used for this cross-origin resource.",
      code: `Access-Control-Allow-Methods: *`,
    },
  ],
  errors: [
    {
      msg: "Did not find method in CORS header Access-Control-Allow-Methods",
      fix: "Add the method to the Access-Control-Allow-Methods header on your server.",
    },
  ],
  faq: [
    {
      q: "Can I have multiple methods in Access-Control-Allow-Methods?",
      a: "Yes, you can list multiple methods, separated by commas. For example: `Access-Control-Allow-Methods: GET, POST, PUT`.",
    },
    {
      q: "Do I need to explicitly allow the OPTIONS method in Access-Control-Allow-Methods?",
      a: "No, the OPTIONS method is implicitly handled by the browser during the preflight request. You don't need to list it in `Access-Control-Allow-Methods`.",
    },
    {
      q: "Can I allow all methods?",
      a: "Yes, you can use an asterisk (`*`) to allow all methods. For example: `Access-Control-Allow-Methods: *`.",
    },
  ],
};
---

<Layout
  title={`${headerData.name} | CORS Headers Explained`}
  description={headerData.description}
>
  <Article data={headerData} />
</Layout>

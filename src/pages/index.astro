---
import Layout from "../layouts/Layout.astro";
import Card from "../components/ui/Card.astro";
import CardContent from "../components/ui/CardContent.astro";
import ChevronRight from "../components/icons/ChevronRight.astro";

// Central data â†’ add / edit headers here
const headerCards = [
  {
    name: "Access-Control-Allow-Origin",
    slug: "access-control-allow-origin",
    blurb: "Define which origins are allowed to access cross-origin resources.",
  },
  {
    name: "Access-Control-Allow-Credentials",
    slug: "access-control-allow-credentials",
    blurb:
      "Determine if credentials (cookies, authentication headers) can be included.",
  },
  {
    name: "Access-Control-Allow-Headers",
    slug: "access-control-allow-headers",
    blurb: "Specify which headers clients can use in cross-origin requests.",
  },
  {
    name: "Access-Control-Allow-Methods",
    slug: "access-control-allow-methods",
    blurb: "Specify which HTTP methods are allowed in cross-origin requests.",
  },
  {
    name: "Access-Control-Expose-Headers",
    slug: "access-control-expose-headers",
    blurb:
      "Enable client-side JavaScript to read non-standard response headers.",
  },
  {
    name: "Access-Control-Max-Age",
    slug: "access-control-max-age",
    blurb: "Reduce latency by caching preflight results for faster requests.",
  },
  {
    name: "Access-Control-Request-Headers",
    slug: "access-control-request-headers",
    blurb:
      "Lists the headers the client intends to send with the actual request.",
  },
  {
    name: "Access-Control-Request-Method",
    slug: "access-control-request-method",
    blurb:
      "Specifies the HTTP method the client plans to use in the actual request.",
  },
  {
    name: "Origin",
    slug: "origin",
    blurb:
      "Indicates where the request originated from (scheme, hostname, port).",
  },
];

let baseUrl = import.meta.env.BASE_URL;
if (baseUrl.endsWith("/")) {
  baseUrl = baseUrl.slice(0, -1);
}
---

<Layout
  title="CORS Headers Explained"
  description="All-in-one resource for understanding CORS headers, including usage, common errors and code examples."
>
  <main
    class="text-gray-900 dark:text-gray-100 font-sans px-4 sm:px-6 pt-10 pb-20 max-w-5xl mx-auto"
  >
    {/* Title block */}
    <header class="mb-10">
      <h1 class="text-4xl font-semibold text-gray-900 dark:text-gray-100">
        CORS Headers
      </h1>
    </header>

    <article class="space-y-10">
      {/* DESCRIPTION */}
      <div class="space-y-4">
        <p class="text-base leading-relaxed text-gray-600 dark:text-gray-400">
          CORS (Cross-Origin Resource Sharing) headers are HTTP headers that
          control how web browsers handle requests between different origins.
          When your frontend application makes a request to an API on a
          different domain, these headers determine whether the browser allows
          the response to be read.
        </p>
        <p class="text-base leading-relaxed text-gray-600 dark:text-gray-400">
          This resource provides comprehensive documentation for all
          CORS-related headers, including syntax, practical examples, common
          errors, and solutions. Whether you're troubleshooting a CORS error or
          implementing secure cross-origin access, you'll find the information
          you need here.
        </p>
      </div>

      {/* LIST OF ALL CORS HEADERS */}
      <section id="headers" class="space-y-8 scroll-mt-20">
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">
          <a
            href="#headers"
            class="hover:text-gray-600 dark:hover:text-gray-400 transition-colors"
            aria-label="Link to All CORS Headers section"
          >
            All CORS Headers
          </a>
        </h2>
        <div class="grid gap-6 md:grid-cols-2">
          {
            headerCards.map(({ name, slug, blurb }) => (
              <a href={`${baseUrl}/${slug}`} class="group">
                <Card class="h-full hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200">
                  <CardContent>
                    <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors">
                      {name}
                    </h3>
                    <p class="text-sm leading-relaxed text-gray-600 dark:text-gray-400">
                      {blurb}
                    </p>
                    <div class="flex items-center pt-2 text-gray-500 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-100 transition-colors">
                      <span class="mr-1 text-sm">Read more</span>
                      <ChevronRight />
                    </div>
                  </CardContent>
                </Card>
              </a>
            ))
          }
        </div>
      </section>

      {/* WHEN DO YOU NEED THIS RESOURCE */}
      <section id="use-cases" class="space-y-8 scroll-mt-20">
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">
          <a
            href="#use-cases"
            class="hover:text-gray-600 dark:hover:text-gray-400 transition-colors"
            aria-label="Link to When do you need this resource section"
          >
            When Do You Need This Resource
          </a>
        </h2>

        <div class="space-y-6">
          <div class="space-y-2">
            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">
              For Web Developers
            </h3>
            <p
              class="text-base leading-relaxed text-gray-600 dark:text-gray-400"
            >
              Use this resource when your frontend application needs to interact
              with APIs on different origins. You'll find detailed explanations
              of CORS errors, step-by-step solutions, and code examples to help
              you troubleshoot and fix cross-origin issues quickly.
            </p>
          </div>

          <div class="space-y-2">
            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">
              For API Makers
            </h3>
            <p
              class="text-base leading-relaxed text-gray-600 dark:text-gray-400"
            >
              Learn how to configure CORS headers correctly to enable secure
              client-side access to your API. Understand which headers to use
              for different scenarios, from public APIs to authenticated
              endpoints, and how to implement proper security controls.
            </p>
          </div>
        </div>
      </section>

      {/* EXPLORE MORE TOOLS */}
      <section id="tools" class="space-y-8 scroll-mt-20">
        <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">
          <a
            href="#tools"
            class="hover:text-gray-600 dark:hover:text-gray-400 transition-colors"
            aria-label="Link to Explore More Tools section"
          >
            Explore More Tools
          </a>
        </h2>

        <div class="space-y-6">
          <div class="space-y-2">
            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">
              <a
                href="https://corsfix.com/tools/cors-tester"
                target="_blank"
                class="underline hover:text-gray-600 dark:hover:text-gray-400 transition-colors"
              >
                CORS Tester
              </a>
            </h3>
            <p
              class="text-base leading-relaxed text-gray-600 dark:text-gray-400"
            >
              Paste any API endpoint and instantly see if it supports CORS and
              which headers it returns. Perfect for debugging and verifying your
              CORS configuration.
            </p>
          </div>

          <div class="space-y-2">
            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">
              <a
                href="https://app.corsfix.com/playground"
                target="_blank"
                class="underline hover:text-gray-600 dark:hover:text-gray-400 transition-colors"
              >
                CORS Proxy Playground
              </a>
            </h3>
            <p
              class="text-base leading-relaxed text-gray-600 dark:text-gray-400"
            >
              Bypass CORS errors in development by routing your requests through
              our CORS proxy. Test and experiment with cross-origin requests in
              a safe environment.
            </p>
          </div>
        </div>
      </section>
    </article>
  </main>
</Layout>

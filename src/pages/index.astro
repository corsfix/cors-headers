---
import Layout from "../layouts/Layout.astro";
import Card from "../components/ui/Card.astro";
import CardContent from "../components/ui/CardContent.astro";
import Button from "../components/ui/Button.astro";
import ChevronRight from "../components/icons/ChevronRight.astro";

// Central data â†’ add / edit headers here
const headerCards = [
  {
    name: "Access-Control-Allow-Origin",
    slug: "access-control-allow-origin",
    blurb: "Define which origins are allowed to access cross-origin resources.",
  },
  {
    name: "Access-Control-Allow-Credentials",
    slug: "access-control-allow-credentials",
    blurb:
      "Determine if credentials (cookies, authentication headers) can be included.",
  },
  {
    name: "Access-Control-Allow-Headers",
    slug: "access-control-allow-headers",
    blurb: "Specify which headers clients can use in cross-origin requests.",
  },
  {
    name: "Access-Control-Allow-Methods",
    slug: "access-control-allow-methods",
    blurb: "Specify which HTTP methods are allowed in cross-origin requests.",
  },
  {
    name: "Access-Control-Expose-Headers",
    slug: "access-control-expose-headers",
    blurb:
      "Enable client-side JavaScript to read non-standard response headers.",
  },
  {
    name: "Access-Control-Max-Age",
    slug: "access-control-max-age",
    blurb: "Reduce latency by caching preflight results for faster requests.",
  },
  {
    name: "Access-Control-Request-Headers",
    slug: "access-control-request-headers",
    blurb:
      "Lists the headers the client intends to send with the actual request.",
  },
  {
    name: "Access-Control-Request-Method",
    slug: "access-control-request-method",
    blurb:
      "Specifies the HTTP method the client plans to use in the actual request.",
  },
  {
    name: "Origin",
    slug: "origin",
    blurb:
      "Indicates where the request originated from (scheme, hostname, port).",
  },
];

let baseUrl = import.meta.env.BASE_URL;
if (baseUrl.endsWith("/")) {
  baseUrl = baseUrl.slice(0, -1);
}
---

<Layout
  title="CORS Headers Explained"
  description="All-in-one resource for understanding CORS headers, including usage, common errors and code examples."
>
  <main class="text-gray-900 dark:text-gray-100 font-sans pt-10 pb-20 px-4 sm:px-6 lg:px-8">
    {/* Hero */}
    <header class="text-center">
      <h1
        class="text-3xl sm:text-4xl font-semibold text-gray-900 dark:text-gray-100"
      >
        CORS Headers
      </h1>
    </header>
    <p class="mt-6 max-w-3xl mx-auto text-lg sm:text-xl text-gray-600 dark:text-gray-400 mb-12">
      All-in-one resource for understanding CORS headers, including usage,
      common errors and code examples. Perfect for web developers and API
      makers.
    </p>

    {/* Header Grid */}
    <section class="max-w-7xl mx-auto">
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {
          headerCards.map(({ name, slug, blurb }, i) => (
            <a href={`${baseUrl}/${slug}`} class="group">
              <Card class="h-full hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200">
                <CardContent>
                  <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100 group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors">{name}</h3>
                  <p class="text-sm leading-relaxed text-gray-600 dark:text-gray-400">{blurb}</p>
                  <div class="flex items-center pt-2 text-gray-500 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-100 transition-colors">
                    <span class="mr-1 text-sm">Read more</span>
                    <ChevronRight />
                  </div>
                </CardContent>
              </Card>
            </a>
          ))
        }
      </div>
    </section>

    {/* Usage Scenarios */}
    <section class="max-w-5xl mx-auto mt-24 space-y-8">
      <h2
        class="text-2xl font-semibold text-gray-900 dark:text-gray-100"
      >
        When do these headers matter?
      </h2>
      <div class="grid gap-6 md:grid-cols-2">
        <Card>
          <CardContent class="space-y-2">
            <h3 class="font-medium text-gray-900 dark:text-gray-100">For Web Developers</h3>
            <p class="text-sm leading-relaxed text-gray-600 dark:text-gray-400">
              Understand CORS to troubleshoot and fix issues when your frontend
              application interacts with APIs on different origins.
            </p>
          </CardContent>
        </Card>
        <Card>
          <CardContent class="space-y-2">
            <h3 class="font-medium text-gray-900 dark:text-gray-100">For API Makers</h3>
            <p class="text-sm leading-relaxed text-gray-600 dark:text-gray-400">
              Learn how to configure CORS headers to securely enable client-side
              access to your API from various origins.
            </p>
          </CardContent>
        </Card>
      </div>
    </section>

    {/* Tools */}
    <section class="max-w-7xl mx-auto mt-32 space-y-8">
      <h2
        class="text-2xl font-semibold text-gray-900 dark:text-gray-100"
      >
        Explore More Tools
      </h2>
      <div class="grid gap-6 lg:grid-cols-2">
        <div
          class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-8 space-y-4"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">CORS Tester</h3>
          <p class="max-w-md text-base leading-relaxed text-gray-600 dark:text-gray-400">
            Paste any API endpoint and instantly see if it supports CORS and
            which headers it returns.
          </p>
          <Button
            href="https://corsfix.com/tools/cors-tester"
            variant="default"
            target="_blank"
          >
            Try the tester
          </Button>
        </div>
        <div
          class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-8 space-y-4"
        >
          <h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100">CORS Proxy Playground</h3>
          <p class="max-w-md text-base leading-relaxed text-gray-600 dark:text-gray-400">
            Bypass CORS errors in your web app by routing your requests through
            our CORS proxy.
          </p>
          <Button
            href="https://app.corsfix.com/playground"
            variant="secondary"
            target="_blank"
          >
            Open playground
          </Button>
        </div>
      </div>
    </section>
  </main>
</Layout>

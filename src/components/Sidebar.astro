---
// Get current path for active link highlighting
const currentPath = Astro.url.pathname;

const navLinks = [
  { href: "/cors-headers", label: "CORS Headers" },
  {
    href: "/cors-headers/access-control-allow-origin",
    label: "Access-Control-Allow-Origin",
  },
  {
    href: "/cors-headers/access-control-allow-credentials",
    label: "Access-Control-Allow-Credentials",
  },
  {
    href: "/cors-headers/access-control-allow-headers",
    label: "Access-Control-Allow-Headers",
  },
  {
    href: "/cors-headers/access-control-allow-methods",
    label: "Access-Control-Allow-Methods",
  },
  {
    href: "/cors-headers/access-control-expose-headers",
    label: "Access-Control-Expose-Headers",
  },
  {
    href: "/cors-headers/access-control-max-age",
    label: "Access-Control-Max-Age",
  },
  {
    href: "/cors-headers/access-control-request-headers",
    label: "Access-Control-Request-Headers",
  },
  {
    href: "/cors-headers/access-control-request-method",
    label: "Access-Control-Request-Method",
  },
  { href: "/cors-headers/origin", label: "Origin" },
];
---

<div class="h-screen flex flex-col sticky top-0 bottom-0 z-40">
  <aside
    id="sidebar"
    class="bg-[#fafafa] border-r border-gray-200 overflow-y-auto flex grow flex-col fixed lg:static top-0 bottom-0 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out"
  >
    <a href="/" class="block p-4">
      <div class="flex justify-start items-center grow basis-0">
        <div class="mr-2 text-6xl">
          <img src="/cors-headers/logo.png" alt="Corsfix" class="size-10" />
        </div>
        <div class="font-semibold text-lg">Corsfix</div>
      </div>
    </a>
    <!-- Navigation Links -->
    <nav class="flex-1 p-4 space-y-0.5">
      {
        navLinks.map(({ href, label }) => (
          <a
            href={href}
            class:list={[
              "block px-3 py-2 text-sm rounded-md transition-colors",
              currentPath === href || currentPath === `${href}/`
                ? "bg-gray-100 text-gray-900"
                : "text-gray-600 hover:bg-gray-50 hover:text-gray-900",
            ]}
          >
            {label}
          </a>
        ))
      }
    </nav>

    <!-- Footer -->
    <div class="p-4 border-t border-gray-200 text-xs text-gray-500 space-y-1">
      <p class="font-medium">CORS Headers Explained by Corsfix</p>
      <p>Content licensed under CC-BY-SA-4.0</p>
    </div>
  </aside>

  <div id="sidebar-overlay" class="fixed inset-0 z-30 hidden lg:hidden"></div>
</div>

<script>
  const sidebar = document.getElementById("sidebar");
  const logoHeader = document.getElementById("logo-header");
  const toggle = document.getElementById("sidebar-toggle");
  const overlay = document.getElementById("sidebar-overlay");

  function toggleSidebar() {
    sidebar?.classList.toggle("-translate-x-full");
    logoHeader?.classList.toggle("-translate-x-full");
    overlay?.classList.toggle("hidden");
  }

  toggle?.addEventListener("click", toggleSidebar);
  overlay?.addEventListener("click", toggleSidebar);
</script>
